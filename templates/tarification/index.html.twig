{% extends 'base.html.twig' %}

{% block title %}Tarification - {{ parent() }}{% endblock %}

{% block content %}
<style>
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .animate-fade-in {
    animation: fade-in-up 0.8s ease-out forwards;
  }
  
  .hero-gradient {
    background: linear-gradient(135deg, #3b82f6, #1e40af, #1d4ed8);
    background-size: 200% 200%;
    animation: gradient-shift 8s ease infinite;
  }
  
  @keyframes gradient-shift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  
  .info-bar-gradient {
    background: linear-gradient(135deg, #1f2937, #374151, #4b5563);
  }
  
  .service-card-enhanced {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
  }
  
  .service-card-enhanced::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
    transition: left 0.6s;
  }
  
  .service-card-enhanced:hover::before {
    left: 100%;
  }
  
  .service-card-enhanced:hover {
    transform: translateY(-8px) scale(1.03);
    box-shadow: 0 20px 40px -10px rgba(59, 130, 246, 0.3);
  }
  
  .chatbot-section {
    background: linear-gradient(135deg, #dbeafe, #bfdbfe);
    position: relative;
  }
  
  .icon-container {
    transition: all 0.3s ease;
  }
  
  .icon-container:hover {
    transform: scale(1.1) rotate(5deg);
  }
  
  .price-highlight {
    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
</style>

  <section class="hero-gradient pb-12 text-center pt-16 relative overflow-hidden">
    <div class="absolute inset-0 bg-black/10"></div>
    <div class="relative z-10">
      <h1 class="text-4xl md:text-5xl font-bold text-white mb-4 animate-fade-in">Tarification <span class="text-yellow-300">simplifiée</span></h1>
      <p class="text-xl text-white/90 animate-fade-in" style="animation-delay: 0.2s;">Pas de frais cachés. Des prix transparents et justes.</p>
    </div>
  </section>


  <div class="info-bar-gradient text-white py-6 shadow-xl">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-center items-center gap-8 text-sm font-medium">
        <div class="flex items-center gap-3 group animate-fade-in" style="animation-delay: 0.4s;">
          <span class="icon-container inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-green-500/20 backdrop-blur-sm border border-green-400/30">
            <img src="svg3.svg" alt="Livraison gratuite" class="w-6 h-6 filter brightness-0 invert" />
          </span>
          <div>
            <div class="font-semibold text-green-300">Livraison gratuite</div>
            <div class="text-gray-300 text-xs">En 24h partout en ville</div>
          </div>
        </div>
        
        <div class="flex items-center gap-3 group animate-fade-in" style="animation-delay: 0.6s;">
          <span class="icon-container inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-blue-500/20 backdrop-blur-sm border border-blue-400/30">
            <img src="svg3.svg" alt="Commande minimum" class="w-6 h-6 filter brightness-0 invert" />
          </span>
          <div>
            <div class="font-semibold text-blue-300">Minimum €25</div>
            <div class="text-gray-300 text-xs">Montant minimum de commande</div>
          </div>
        </div>
        
        <div class="flex items-center gap-3 group animate-fade-in" style="animation-delay: 0.8s;">
          <span class="icon-container inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-purple-500/20 backdrop-blur-sm border border-purple-400/30">
            <img src="svg11.svg" alt="Frais de service" class="w-6 h-6 filter brightness-0 invert" />
          </span>
          <div>
            <div class="font-semibold text-purple-300">Frais €2,99</div>
            <div class="text-gray-300 text-xs">Frais de service transparents</div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <main class="max-w-6xl mx-auto px-4 py-16">
    <div class="flex flex-col md:flex-row justify-center gap-8">
      {% for service in services %}
      <a href="{{ path('app_tarif_details', {'id': service.id}) }}" 
         class="service-card-enhanced flex-1 bg-white border border-gray-200 rounded-2xl shadow-lg flex flex-col items-center p-8 min-w-[280px] max-w-sm mx-auto group animate-fade-in" style="animation-delay: {{ loop.index0 * 0.2 + 1 }}s;">
        
        <div class="w-24 h-24 rounded-3xl flex items-center justify-center bg-gradient-to-br from-blue-100 to-blue-200 mb-6 group-hover:from-blue-200 group-hover:to-blue-300 transition-all duration-300 group-hover:scale-110">
          <img src="{{ service.image }}" alt="{{ service.name }}" class="w-14 h-14 object-contain"/>
        </div>
        
        <div class="font-bold text-2xl mb-3 text-gray-800 group-hover:text-blue-600 transition-colors duration-300">{{ service.name }}</div>
        
        <div class="text-gray-600 text-center leading-relaxed mb-8 flex-grow">{{ service.description }}</div>
        
        <div class="w-full border-t border-gray-100 pt-6 mt-auto">
          <div class="text-xs text-gray-500 font-medium uppercase tracking-wider mb-3 text-center">Prix par poids</div>
          <div class="text-center">
            <div class="text-gray-700 mb-2">à partir de</div>
            <div class="text-3xl font-bold price-highlight">
              {% if service.name == "Laver" %}
                €24.90<span class="text-lg text-gray-500 font-normal">/6kg</span>
              {% elseif service.name == "Pressing" %}
                €3<span class="text-lg text-gray-500 font-normal">/pièce</span>
              {% elseif service.name == "Couettes & Ameublements" %}
                €14<span class="text-lg text-gray-500 font-normal">/pièce</span>
              {% endif %}
            </div>
          </div>
        </div>
      </a>
      {% endfor %}
    </div>
    
    <div class="chatbot-section rounded-3xl p-8 mt-16 shadow-xl border border-blue-200 animate-fade-in" style="animation-delay: 1.8s;">
      <div class="flex flex-col md:flex-row items-center justify-between gap-6">
        <div class="flex-1">
          <h3 class="font-bold text-2xl text-gray-800 mb-2">Une question sur nos services ?</h3>
          <p class="text-gray-600">Demandez à notre sympathique chatbot <strong class="text-blue-600">Washy</strong> ! Il vous aidera à trouver la solution parfaite.</p>
        </div>
        <a href="{{ path('app_ticket') }}" 
           class="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-8 py-4 rounded-2xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 hover:-translate-y-1 transition-all duration-300 flex items-center gap-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
          </svg>
          Démarrer le chat
        </a>
      </div>
    </div>
  </main>

  <script>
document.addEventListener('DOMContentLoaded', function() {
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver(function(entries) {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  }, observerOptions);

  document.querySelectorAll('.animate-fade-in').forEach(el => {
    el.style.opacity = '0';
    el.style.transform = 'translateY(30px)';
    el.style.transition = 'all 0.8s ease-out';
    observer.observe(el);
  });

  document.querySelectorAll('.service-card-enhanced').forEach(card => {
    card.addEventListener('mouseenter', function() {
      this.style.zIndex = '10';
    });
    
    card.addEventListener('mouseleave', function() {
      this.style.zIndex = '1';
    });
  });

  document.querySelectorAll('.price-highlight').forEach(price => {
    const parent = price.closest('.service-card-enhanced');
    
    parent.addEventListener('mouseenter', function() {
      price.style.transform = 'scale(1.1)';
      price.style.transition = 'transform 0.3s ease';
    });
    
    parent.addEventListener('mouseleave', function() {
      price.style.transform = 'scale(1)';
    });
  });

  document.querySelectorAll('.icon-container').forEach(icon => {
    setInterval(() => {
      icon.style.transform = 'scale(1.05)';
      setTimeout(() => {
        icon.style.transform = 'scale(1)';
      }, 200);
    }, 3000 + Math.random() * 2000);
  });

  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });

  console.log('✨ Page tarification améliorée avec succès !');
});
</script>
{% endblock %}