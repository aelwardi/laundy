{% extends 'base.html.twig' %}

{% block title %}Détails du service - {{ parent() }}{% endblock %}

{% block javascripts %}
<style>
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  @keyframes slide-in-right {
    from { opacity: 0; transform: translateX(30px); }
    to { opacity: 1; transform: translateX(0); }
  }
  
  .animate-fade-in {
    animation: fade-in 0.6s ease-out forwards;
  }
  
  .animate-slide-right {
    animation: slide-in-right 0.6s ease-out forwards;
  }
  
  .service-nav-item {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
  }
  
  .service-nav-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
    transition: left 0.5s;
  }
  
  .service-nav-item:hover::before {
    left: 100%;
  }
  
  .service-nav-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px -5px rgba(59, 130, 246, 0.2);
  }
  
  .tab-enhanced {
    transition: all 0.3s ease;
    position: relative;
  }
  
  .tab-enhanced.active {
    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  .tab-enhanced::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 3px;
    background: linear-gradient(90deg, #3b82f6, #1d4ed8);
    transition: width 0.3s ease;
    border-radius: 2px;
  }
  
  .tab-enhanced.active::after {
    width: 100%;
  }
  
  .service-info-card {
    background: linear-gradient(135deg, #dbeafe, #bfdbfe);
    border: 1px solid rgba(59, 130, 246, 0.2);
    transition: all 0.3s ease;
  }
  
  .service-info-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 35px -5px rgba(59, 130, 246, 0.2);
  }
  
  .price-item {
    transition: all 0.3s ease;
    border-radius: 0.75rem;
    margin-bottom: 0.5rem;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(229, 231, 235, 0.5);
  }
  
  .price-item:hover {
    background: rgba(59, 130, 246, 0.05);
    border-color: rgba(59, 130, 246, 0.2);
    transform: translateX(8px);
  }
  
  .price-highlight {
    background: linear-gradient(135deg, #1e40af, #3b82f6);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-weight: 700;
  }
  
  .cta-card {
    background: linear-gradient(135deg, #1e40af, #3b82f6);
    position: relative;
    overflow: hidden;
  }
  
  .cta-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
    pointer-events: none;
  }
  
  .cta-button {
    transition: all 0.3s ease;
    text-decoration: none;
  }
  
  .cta-button:hover {
    transform: translateY(-2px);
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  
  .detail-item {
    transition: all 0.3s ease;
    border-radius: 0.75rem;
    margin-bottom: 0.5rem;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(229, 231, 235, 0.5);
  }
  
  .detail-item:hover {
    background: rgba(59, 130, 246, 0.05);
    border-color: rgba(59, 130, 246, 0.2);
    transform: translateX(8px);
  }
  
  .icon-container {
    transition: all 0.3s ease;
  }
  
  .icon-container:hover {
    transform: scale(1.1) rotate(5deg);
  }
  
  .breadcrumb-enhanced {
    transition: all 0.3s ease;
    border-radius: 0.5rem;
    padding: 0.5rem;
  }
  
  .breadcrumb-enhanced:hover {
    background: rgba(59, 130, 246, 0.1);
    transform: translateX(-5px);
  }
  
  .tag-enhanced {
    background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
    border: 1px solid rgba(148, 163, 184, 0.3);
    transition: all 0.3s ease;
  }
  
  .tag-enhanced:hover {
    background: linear-gradient(135deg, #dbeafe, #bfdbfe);
    border-color: rgba(59, 130, 246, 0.3);
    transform: scale(1.05);
  }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
      function showTab(tab) {
        const prixTab = document.getElementById('liste-prix-tab');
        const detailsTab = document.getElementById('details-service-tab');
        const prixContent = document.getElementById('liste-prix-content');
        const detailsContent = document.getElementById('details-service-content');
        
        [prixTab, detailsTab].forEach(t => {
          t.classList.remove('active', 'text-black', 'border-b-2', 'border-black');
          t.classList.add('text-gray-500');
        });
        
        [prixContent, detailsContent].forEach(c => {
          c.style.display = 'none';
          c.style.opacity = '0';
        });
        
        if (tab === 'prix') {
          prixTab.classList.add('active', 'text-black', 'border-b-2', 'border-black');
          prixTab.classList.remove('text-gray-500');
          prixContent.style.display = 'block';
          setTimeout(() => prixContent.style.opacity = '1', 10);
        } else {
          detailsTab.classList.add('active', 'text-black', 'border-b-2', 'border-black');
          detailsTab.classList.remove('text-gray-500');
          detailsContent.style.display = 'block';
          setTimeout(() => detailsContent.style.opacity = '1', 10);
        }
      }

      document.getElementById('liste-prix-tab').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('prix');
      });
      
      document.getElementById('details-service-tab').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('details');
      });
      
      setTimeout(() => {
        document.querySelectorAll('.animate-fade-in, .animate-slide-right').forEach((el, index) => {
          setTimeout(() => {
            el.style.opacity = '1';
            el.style.transform = 'translateY(0) translateX(0)';
          }, index * 100);
        });
      }, 100);
      
      showTab('prix');
    });
</script>
{% endblock %}

{% block content %}

<div class="max-w-6xl mx-auto mt-24 px-4">
  <div class="breadcrumb-enhanced text-sm text-gray-700 flex items-center animate-fade-in">
    <a href="{{ path('app_tarification') }}" class="flex items-center font-medium hover:text-blue-600 transition-colors duration-300">
      <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path d="M15 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Liste des services
    </a>
  </div>

  <div class="flex flex-wrap items-center gap-3 mt-10 animate-slide-right" style="animation-delay: 0.2s;">
    {% for srv in services %}
    <a href="{{ path('app_tarif_details', {'id': srv.id}) }}" class="service-nav-item flex items-center gap-3 px-6 py-3 rounded-2xl font-semibold no-underline shadow-lg
      {% if srv.id == service.id %}
        bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-blue-200
      {% else %}
        bg-white text-gray-700 border border-gray-200 hover:border-blue-300 hover:text-blue-600
      {% endif %}">
      <div class="icon-container w-8 h-8 rounded-full flex items-center justify-center
        {% if srv.id == service.id %}
          bg-white/20
        {% else %}
          bg-blue-50
        {% endif %}">
        <img src="{{ srv.icon }}" alt="icon" class="w-5 h-5">
      </div>
      {{ srv.name }}
    </a>
    {% endfor %}
  </div>
  
  <div class="service-info-card rounded-3xl p-8 flex flex-col lg:flex-row items-center justify-between mt-12 animate-fade-in" style="animation-delay: 0.4s;">
    <div class="flex-1 mb-4 lg:mb-0">
      <div class="text-2xl lg:text-3xl font-bold text-gray-800 mb-3">{{ service.name }}</div>
      <div class="text-gray-600 text-lg leading-relaxed">{{ service.description }}</div>
    </div>
    <div class="flex-shrink-0">
      <div class="w-16 h-16 bg-white/70 backdrop-blur-sm rounded-2xl flex items-center justify-center shadow-lg">
        <img src="img14.png" alt="icon" class="w-10 h-10">
      </div>
    </div>
  </div>

  <div class="flex items-center gap-8 mb-6 mt-12 border-b border-gray-200 animate-fade-in" style="animation-delay: 0.6s;">
    <a href="#" id="liste-prix-tab" class="tab-enhanced text-lg font-semibold pb-4 active">Liste de prix</a>
    <a href="#" id="details-service-tab" class="tab-enhanced text-lg font-semibold pb-4 text-gray-400 hover:text-gray-700">Détails du service</a>
  </div>

  <div id="liste-prix-content" class="mt-12 animate-fade-in" style="display:none; opacity: 0; transition: opacity 0.5s ease;">
    {% for coService in service.coSevices %}
    <div class="mb-8">
      <h3 class="text-2xl font-bold mb-6 bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent">{{coService.title}}</h3>
      <div class="space-y-2">
        {% for subService in coService.subServices %}
        <div class="price-item flex justify-between items-start">
          <div class="flex-1">
            <div class="font-semibold text-gray-800 text-lg">{{ subService.name }}</div>
            <div class="text-sm text-gray-500 mt-1">{{ subService.description }}</div>
          </div>
          <div class="price-highlight text-xl ml-4">{{ subService.price }}</div>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endfor %}
    
    <div class="mt-12">
      <div class="cta-card text-white rounded-3xl px-8 py-6 relative">
        <div class="relative z-10 flex flex-col lg:flex-row items-center justify-between gap-4">
          <div class="flex-1">
            <div class="font-bold text-xl mb-2">Vous n'êtes pas sûr de la quantité que vous avez ?</div>
            <div class="text-white/90">Obtenez une estimation personnalisée rapidement</div>
          </div>
          <a href="#" class="cta-button bg-white text-blue-600 px-8 py-3 rounded-2xl font-bold shadow-lg hover:shadow-xl inline-flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
            Obtenir un devis
          </a>
        </div>
      </div>
    </div>
  </div>

  <div id="details-service-content" class="mt-12 animate-fade-in" style="display:none; opacity: 0; transition: opacity 0.5s ease;">
    <div class="mb-8">
      <span class="tag-enhanced inline-block px-4 py-2 rounded-full text-sm font-medium">laver + sécher au sèche-linge + dans un sac</span>
    </div>
    
    <div class="space-y-3">
      {% for details in service.detailsServices %}
      <div class="detail-item">
        <div class="flex items-start gap-4">
          <div class="icon-container flex-shrink-0 w-12 h-12 bg-blue-50 rounded-2xl flex items-center justify-center">
            <img src="{{details.icon}}" alt="icon" class="w-7 h-7">
          </div>
          <div class="flex-1">
            <div class="font-bold text-lg text-gray-800 mb-2">{{details.name}}</div>
            <div class="text-gray-600 leading-relaxed">{{details.description}}</div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}