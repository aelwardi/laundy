{% extends 'base.html.twig' %}

{% block title %}Détails du service - {{ parent() }}{% endblock %}

{% block javascripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
      function showTab(tab) {
        document.getElementById('liste-prix-tab').classList.toggle('text-black', tab === 'prix');
        document.getElementById('liste-prix-tab').classList.toggle('border-b-2', tab === 'prix');
        document.getElementById('liste-prix-tab').classList.toggle('border-black', tab === 'prix');
        document.getElementById('liste-prix-tab').classList.toggle('text-gray-500', tab !== 'prix');

        document.getElementById('details-service-tab').classList.toggle('text-black', tab === 'details');
        document.getElementById('details-service-tab').classList.toggle('border-b-2', tab === 'details');
        document.getElementById('details-service-tab').classList.toggle('border-black', tab === 'details');
        document.getElementById('details-service-tab').classList.toggle('text-gray-500', tab !== 'details');

        document.getElementById('liste-prix-content').style.display = tab === 'prix' ? 'block' : 'none';
        document.getElementById('details-service-content').style.display = tab === 'details' ? 'block' : 'none';
      }

      document.getElementById('liste-prix-tab').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('prix');
      });
      document.getElementById('details-service-tab').addEventListener('click', function(e) {
        e.preventDefault();
        showTab('details');
      });
      showTab('prix');
    });
</script>
{% endblock %}

{% block content %}

<div class="max-w-5xl mx-auto mt-20">
  <div class="text-sm text-gray-700 flex items-center">
    <a href="{{ path('app_tarification') }}" class="flex items-center font-medium">
      <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path d="M15 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Liste des services
    </a>
  </div>

  <div class="flex items-center gap-2 mt-10">
    {% for srv in services %}
    <a href="{{ path('app_tarif_details', {'id': srv.id}) }}" class="flex items-center gap-2 px-4 py-2 rounded font-semibold no-underline transition-colors duration-200
      {% if srv.id == service.id %}
        bg-torea-900 text-white
      {% else %}
        bg-white text-gray-700 border border-gray-200 hover:bg-gray-50
      {% endif %}">
      <img src="{{ srv.icon }}" alt="icon" class="w-7 h-7">
      {{ srv.name }}
    </a>
    {% endfor %}
  </div>
    <div class="bg-pass-200 rounded-lg p-5 flex flex-col md:flex-row items-center justify-between mt-10">
      <div class="flex-1">
        <div class="text-xl font-bold text-torea-900 mb-1">{{ service.name }}</div>
        <div class="text-torea-900 text-sm">{{ service.description }}</div>
      </div>
      <div>
        <img src="img14.png" alt="icon" class="w-9 h-9">
      </div>
    </div>

  <div class=" flex items-center gap-6 mb-4 mt-4">
    <a href="#" id="liste-prix-tab" class="text-black font-semibold border-b-2 border-black pb-1">Liste de prix</a>
    <a href="#" id="details-service-tab" class="text-gray-400 font-semibold hover:text-black pb-1">Détails du service</a>
  </div>

  <div id="liste-prix-content" class="mt-10" style="display:none">
    {% for coService in service.coSevices %}
    <div class="font-bold text-xl mt-2">{{coService.title}}</div>
    <div class="divide-y divide-gray-200 border-b-2 border-gray-400 mb-4">
      {% for subService in coService.subServices %}
      <div class="flex justify-between items-start py-3">
        <div>
          <div class="font-semibold">{{ subService.name }}</div>
          <div class="text-xs text-gray-400">{{ subService.description }}</div>
        </div>
        <div class="font-semibold text-torea-900">{{ subService.price }}</div>
      </div>
      {% endfor %}
    </div>
    {% endfor %}
    <div class="mt-4">
      <div class="bg-torea-900 text-white rounded-lg px-6 py-4 flex flex-col gap-1">
        <div class="font-semibold">Vous n'êtes pas sûr de la quantité que vous avez ?</div>
        <a href="#" class="font-bold">Obtenir un devis</a>
      </div>
    </div>
  </div>

  <div id="details-service-content" class="flex flex-col gap-8 mt-4" style="display:none">
    <div class="mt-10">
      <span class="inline-block text-gray-500 px-3 py-1 rounded text-xs font-medium">laver + sécher au sèche-linge + dans un sac</span>
    </div>
    <div class="divide-y divide-gray-200 mb-4">
      {% for details in service.detailsServices %}
      <div class="py-3">
        <div>
          <div class="flex items-center gap-2 font-bold">
            <span class="inline-flex items-center justify-center rounded-full w-7 h-7 text-sm">
              <img src="{{details.icon}}" alt="icon" class="w-7 h-7">
            </span>
            <span>{{details.name}}</span>
          </div>
        </div>
        <div class="text-gray-400 text-sm ml-8">{{details.description}}</div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}