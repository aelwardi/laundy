{% extends '@EasyAdmin/crud/field/collection.html.twig' %}

{% block collection_widget %}
    <div class="mt-3">
        <label class="form-label">Sous-services</label>
        <div data-ea-collection-field
             data-entry-is-complex="true"
             data-allow-add="{{ allow_add }}"
             data-allow-delete="{{ allow_delete }}"
             data-num-items="{{ value|length }}"
             data-form-type-name-placeholder="{{ form_type_name_placeholder }}">
            
            <div class="ea-form-collection-items">
                {% for key, item in value %}
                    <div class="ea-form-collection-item border rounded p-3 mb-2">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <small class="text-muted">Sous-service {{ loop.index }}</small>
                            {% if allow_delete %}
                                <button type="button" class="btn btn-sm btn-outline-danger ea-form-collection-item-remove">
                                    <i class="fas fa-times"></i>
                                </button>
                            {% endif %}
                        </div>
                        {{ form_widget(item) }}
                    </div>
                {% endfor %}
            </div>

            {% if allow_add %}
                <div class="ea-form-collection-add-button-wrapper mt-2">
                    <button type="button" class="btn btn-sm btn-outline-secondary ea-form-collection-item-add">
                        <i class="fas fa-plus"></i> Ajouter un sous-service
                    </button>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}
