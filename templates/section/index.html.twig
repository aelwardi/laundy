{% extends 'base.html.twig' %}

{% block title %}À propos de nous - {{ parent() }}{% endblock %}

{% block content %}
<style>
  @keyframes fade-in-up {
    from {
      @apply opacity-0 translate-y-[30px];
    }
    to {
      @apply opacity-100 translate-y-0;
    }
  }
  
  @keyframes fade-in-left {
    from {
      @apply opacity-0 -translate-x-[30px];
    }
    to {
      @apply opacity-100 translate-x-0;
    }
  }
  
  @keyframes fade-in-right {
    from {
      @apply opacity-0 translate-x-[30px];
    }
    to {
      @apply opacity-100 translate-x-0;
    }
  }
  
  .animate-fade-up {
    @apply animate-[fade-in-up_0.8s_ease-out_forwards] opacity-0;
  }
  
  .animate-fade-left {
    @apply animate-[fade-in-left_0.8s_ease-out_forwards] opacity-0;
  }
  
  .animate-fade-right {
    @apply animate-[fade-in-right_0.8s_ease-out_forwards] opacity-0;
  }
  
  .section-enhanced {
    @apply transition-all duration-300 ease-in-out p-8 rounded-3xl bg-[linear-gradient(135deg,_#f8fafc,_#f1f5f9)] border border-[rgba(59,_130,_246,_0.1)] mb-8;
  }
  
  .section-enhanced:hover {
    @apply -translate-y-[5px] shadow-[0_20px_40px_-10px_rgba(59,_130,_246,_0.15)] border-[rgba(59,_130,_246,_0.2)];
  }
  
  .image-container {
    @apply relative overflow-hidden rounded-2xl transition-all duration-300 ease-in-out;
  }
  
  .image-container::before {
    @apply content-[''] absolute inset-0 bg-[linear-gradient(135deg,_rgba(59,_130,_246,_0.1),_rgba(147,_51,_234,_0.1))] opacity-0 transition-opacity duration-300 ease-in-out z-[1];
  }
  
  .image-container:hover::before {
    @apply opacity-100;
  }
  
  .image-container img {
    @apply transition-transform duration-300 ease-in-out;
  }
  
  .image-container:hover img {
    @apply scale-105;
  }
  
  .title-enhanced {
    @apply bg-[linear-gradient(135deg,_#1e40af,_#3b82f6)] bg-clip-text text-transparent font-extrabold;
  }
  
  .description-enhanced {
    @apply text-slate-500 leading-[1.7] text-base;
  }
  
  .separator-enhanced {
    @apply h-0.5 bg-[linear-gradient(90deg,_transparent,_#3b82f6,_transparent)] border-none my-12 opacity-30;
  }
  
  .highlight-section {
    @apply bg-[linear-gradient(135deg,_#dbeafe,_#bfdbfe)] border border-[rgba(59,_130,_246,_0.2)] relative overflow-hidden;
  }
  
  .highlight-section::before {
    @apply content-[''] absolute inset-0 bg-[url('data:image/svg+xml,<svg_width="60"_height="60"_viewBox="0_0_60_60"_xmlns="http://www.w3.org/2000/svg"><g_fill="none"_fill-rule="evenodd"><g_fill="%233b82f6"_fill-opacity="0.05"><circle_cx="30"_cy="30"_r="3"/></g></svg>')] pointer-events-none;
  }
  
  .cta-section {
    @apply bg-[linear-gradient(135deg,_#1e40af,_#3b82f6)] relative overflow-hidden;
  }
  
  .cta-section::before {
    @apply content-[''] absolute inset-0 bg-[radial-gradient(circle_at_20%_80%,_rgba(255,_255,_255,_0.1)_0%,_transparent_50%),_radial-gradient(circle_at_80%_20%,_rgba(255,_255,_255,_0.1)_0%,_transparent_50%)] pointer-events-none;
  }
  
  .cta-button {
    @apply bg-white text-[#1e40af] transition-all duration-300 ease-in-out shadow-[0_10px_30px_-5px_rgba(0,_0,_0,_0.1)];
  }
  
  .cta-button:hover {
    @apply -translate-y-0.5 scale-105 shadow-[0_20px_40px_-5px_rgba(0,_0,_0,_0.2)] bg-slate-50;
  }
</style>

  <div class="max-w-6xl mx-auto mt-24 px-4">
    <main>
    {% for section in sections %}
        {% if loop.index == 1 %}
            <section class="section-enhanced animate-fade-up animate-delay-200">
                <div class="flex flex-col lg:flex-row items-center gap-12">
                    <div class="flex-1 animate-fade-left animate-delay-400">
                        <h1 class="title-enhanced text-4xl lg:text-5xl mb-6">{{ section.title }}</h1>
                        <p class="description-enhanced text-lg">{{ section.description }}</p>
                    </div>
                    <div class="flex-1 flex justify-center animate-fade-right animate-delay-600">
                        <div class="image-container max-w-md w-full">
                            <img src="{{ section.image }}" alt="image" class="w-full h-auto object-cover" />
                        </div>
                    </div>
                </div>
            </section>
        {% elseif loop.index == 2 %}
            <hr class="separator-enhanced">
            <section class="section-enhanced animate-fade-up animate-delay-800">
                <div class="flex flex-col lg:flex-row-reverse items-center gap-12">
                    <div class="flex-1 animate-fade-right animate-delay-1000">
                        <h2 class="title-enhanced text-4xl lg:text-5xl mb-6">{{ section.title }}</h2>
                        <p class="description-enhanced text-lg">{{ section.description }}</p>
                    </div>
                    <div class="flex-1 flex justify-center animate-fade-left animate-delay-1200">
                        <div class="image-container max-w-md w-full">
                            <img src="{{ section.image }}" alt="image" class="w-full h-auto object-cover" />
                        </div>
                    </div>
                </div>
            </section>
            <hr class="separator-enhanced">
            <section class="highlight-section section-enhanced text-center animate-fade-up animate-delay-1400">
                <div class="relative z-10">
                    <h2 class="title-enhanced text-3xl lg:text-4xl mb-6 leading-tight">
                        Nous investissons dans l'une des plus grandes flottes de véhicules de livraison électriques au monde.
                    </h2>
                    <div class="description-enhanced text-base max-w-4xl mx-auto leading-relaxed">
                        Incroyable ! Cela deviendra la plus grande flotte de trikes/quadicicycles en activité ! C'est tellement
                        positif d'assister à un passage des commandes symboliques des entreprises (et c'est déjà bien !) à un
                        déploiement commercial complet.
                    </div>
                </div>
            </section>
        {% else %}
            {% set motif_index = (loop.index0) % 2 %}
            <hr class="separator-enhanced">
            {% if motif_index == 0 %}
                <section class="section-enhanced animate-fade-up" data-animation-delay="{{ loop.index0 * 0.2 + 1.6 }}">
                    <div class="flex flex-col lg:flex-row items-center gap-12">
                        <div class="flex-1 animate-fade-left" data-animation-delay="{{ loop.index0 * 0.2 + 1.8 }}">
                            <h3 class="title-enhanced text-3xl lg:text-4xl mb-6">{{ section.title }}</h3>
                            <p class="description-enhanced text-lg">{{ section.description }}</p>
                        </div>
                        <div class="flex-1 flex justify-center animate-fade-right" data-animation-delay="{{ loop.index0 * 0.2 + 2 }}">
                            <div class="image-container max-w-md w-full">
                                <img src="{{ section.image }}" alt="image" class="w-full h-auto object-cover" />
                            </div>
                        </div>
                    </div>
                </section>
            {% else %}
                <section class="section-enhanced animate-fade-up" data-animation-delay="{{ loop.index0 * 0.2 + 1.6 }}">
                    <div class="flex flex-col lg:flex-row-reverse items-center gap-12">
                        <div class="flex-1 animate-fade-right" data-animation-delay="{{ loop.index0 * 0.2 + 1.8 }}">
                            <h3 class="title-enhanced text-3xl lg:text-4xl mb-6">{{ section.title }}</h3>
                            <p class="description-enhanced text-lg">{{ section.description }}</p>
                        </div>
                        <div class="flex-1 flex justify-center animate-fade-left" data-animation-delay="{{ loop.index0 * 0.2 + 2 }}">
                            <div class="image-container max-w-md w-full">
                                <img src="{{ section.image }}" alt="image" class="w-full h-auto object-cover" />
                            </div>
                        </div>
                    </div>
                </section>
            {% endif %}
        {% endif %}
    {% endfor %}

    </main>

    <section class="cta-section mt-16 rounded-3xl shadow-2xl animate-fade-up" data-animation-delay="2.5">
      <div class="relative z-10 max-w-6xl mx-auto flex flex-col lg:flex-row items-center justify-between gap-8 p-8 lg:p-12">
        <div class="flex-shrink-0 animate-fade-left" data-animation-delay="2.7">
          <img src="img9.png" alt="Linge jaune" class="w-32 h-32 lg:w-48 lg:h-48 object-contain" />
        </div>
        <div class="flex-1 flex flex-col items-center lg:items-start justify-center text-center lg:text-left animate-fade-up" data-animation-delay="2.9">
          <h3 class="text-3xl lg:text-4xl font-bold text-white mb-4 leading-tight">Ne laissez pas vos corvées définir qui vous êtes</h3>
          <div class="text-white/90 mb-6 text-lg">Entrez votre adresse et planifiez une collecte dès aujourd'hui</div>
          <a href="{{ path('app_order') }}" class="cta-button inline-flex items-center px-8 py-4 rounded-2xl font-semibold text-lg">
            <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
            Planifiez votre collecte
          </a>
        </div>
      </div>
    </section>
  </div>

  <script>
document.addEventListener('DOMContentLoaded', function() {
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -100px 0px'
  };

  const observer = new IntersectionObserver(function(entries) {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0) translateX(0)';
        
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  document.querySelectorAll('.animate-fade-up, .animate-fade-left, .animate-fade-right').forEach(el => {

    el.style.opacity = '0';
    
    if (el.classList.contains('animate-fade-left')) {
      el.style.transform = 'translateX(-30px)';
    } else if (el.classList.contains('animate-fade-right')) {
      el.style.transform = 'translateX(30px)';
    } else {
      el.style.transform = 'translateY(30px)';
    }
    
    el.style.transition = 'all 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
    
    observer.observe(el);
  });

  document.querySelectorAll('.image-container').forEach(container => {
    const img = container.querySelector('img');
    
    container.addEventListener('mouseenter', function() {
      this.style.filter = 'brightness(1.05) contrast(1.05)';
    });
    
    container.addEventListener('mouseleave', function() {
      this.style.filter = 'brightness(1) contrast(1)';
    });
  });

  let ticking = false;
  
  function updateParallax() {
    const scrolled = window.pageYOffset;
    const parallaxElements = document.querySelectorAll('.section-enhanced');
    
    parallaxElements.forEach((element, index) => {
      const rate = scrolled * -0.02 * (index % 2 === 0 ? 1 : -1);
      element.style.transform = `translateY(${rate}px)`;
    });
    
    ticking = false;
  }

  window.addEventListener('scroll', function() {
    if (!ticking) {
      requestAnimationFrame(updateParallax);
      ticking = true;
    }
  });

  document.querySelector('.cta-button')?.addEventListener('click', function(e) {
    const button = this;
    const rect = button.getBoundingClientRect();
    const ripple = document.createElement('span');
    const size = Math.max(rect.width, rect.height);
    const x = e.clientX - rect.left - size / 2;
    const y = e.clientY - rect.top - size / 2;
    
    ripple.style.cssText = `
      position: absolute;
      width: ${size}px;
      height: ${size}px;
      left: ${x}px;
      top: ${y}px;
      background: rgba(59, 130, 246, 0.3);
      border-radius: 50%;
      transform: scale(0);
      animation: ripple-effect 0.6s ease-out;
      pointer-events: none;
    `;
    
    button.style.position = 'relative';
    button.style.overflow = 'hidden';
    button.appendChild(ripple);
    
    setTimeout(() => ripple.remove(), 600);
  });

  if (!document.querySelector('#ripple-styles')) {
    const style = document.createElement('style');
    style.id = 'ripple-styles';
    style.textContent = `
      @keyframes ripple-effect {
        to {
          transform: scale(2);
          opacity: 0;
        }
      }
    `;
    document.head.appendChild(style);
  }

  const firstTitle = document.querySelector('.title-enhanced');
  if (firstTitle) {
    const text = firstTitle.textContent;
    firstTitle.textContent = '';
    firstTitle.style.opacity = '1';
    
    let i = 0;
    function typeWriter() {
      if (i < text.length) {
        firstTitle.textContent += text.charAt(i);
        i++;
        setTimeout(typeWriter, 50);
      }
    }
    
    setTimeout(typeWriter, 500);
  }

  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });

  console.log('✨ Page "À propos" améliorée avec succès !');
  
  // Appliquer les délais d'animation dynamiques
  document.querySelectorAll('[data-animation-delay]').forEach(element => {
    const delay = element.getAttribute('data-animation-delay');
    element.style.animationDelay = delay + 's';
  });
});
</script>
{% endblock %}